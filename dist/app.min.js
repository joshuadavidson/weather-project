!function(e){function o(i){if(t[i])return t[i].exports;var r=t[i]={exports:{},id:i,loaded:!1};return e[i].call(r.exports,r,r.exports,o),r.loaded=!0,r.exports}var t={};return o.m=e,o.c=t,o.p="",o(0)}([function(e,o){"use strict";function t(){return new Promise(function(e,o){function t(o){e({lat:o.coords.latitude,lon:o.coords.longitude})}function i(){$.ajax({url:"https://freegeoip.net/json/",dataType:"json",async:!0}).then(function(o){e({lat:o.latitude,lon:o.longitude})}).catch(function(){o(new Error("Unable to determine location."))})}navigator.geolocation?navigator.geolocation.getCurrentPosition(t,i,{timeout:1e3}):i()})}function i(e){return new Promise(function(o,t){var i=$.ajax({url:"https://api.darksky.net/forecast/5d462c19218fb1f2697e53fefda9aac7/"+e.lat+","+e.lon,dataType:"jsonp",async:!0});i.then(function(t){d.weather.timeStampWeather=t.currently.time,d.weather.summary=t.currently.summary,d.weather.humidity=t.currently.humidity,d.weather.precipProb=t.currently.precipProbability,d.weather.icon=t.currently.icon,d.weather.imperial.temp=t.currently.temperature,d.weather.imperial.windSpeed=t.currently.windSpeed,d.weather.metric.temp=5*(d.weather.imperial.temp-32)/9,d.weather.metric.windSpeed=1.609344*d.weather.imperial.windSpeed,o(e)}).fail(function(){t(new Error("Unable to fetch weather from DarkSky.net."))})})}function r(e){return new Promise(function(o){var t=$.ajax({url:"https://maps.googleapis.com/maps/api/geocode/json?latlng="+e.lat+","+e.lon+"&key=AIzaSyCP8GLrC7_6nQYpBJFfTn4YWfz8G42y80g",dataType:"json",async:!0});t.then(function(e){if("ZERO_RESULTS"===e.status)d.location.locationText="Location Unknown",o();else{for(var t=0;t<e.results[0].address_components.length;t+=1)for(var i=0;i<e.results[0].address_components[t].types.length;i+=1){var r=e.results[0].address_components[t].types[i];switch(r){case"country":d.location.country=e.results[0].address_components[t].short_name;break;case"administrative_area_level_1":d.location.state=e.results[0].address_components[t].short_name;break;case"locality":d.location.city=e.results[0].address_components[t].short_name}}d.location.locationText=d.location.city+"\t"+d.location.state+"\t"+d.location.country,d.location.locationText=d.location.locationText.trim().replace(/\t/g,", "),o()}}).fail(function(){d.location.locationText="Location Unknown",o()})})}function a(e){$("#weatherBlock").fadeIn(1e3),$("#creditsBlock").fadeIn(1e3),$(".background").fadeIn(1e3),$("#locationText").html(d.location.locationText),$("#summary").html(d.weather.summary),$("#temp").html(Math.round(10*d.weather[e].temp)/10),$("#humidity").html(Math.round(100*d.weather.humidity)+"%"),$("#precipProb").html(Math.round(100*d.weather.precipProb)+"%"),$("#windSpeed").html(Math.round(10*d.weather[e].windSpeed)/10+" "+d.weather[e].windSpeedUnits),$("#weatherIcon").removeClass().addClass("wi "+c[d.weather.icon]+" fa-5x"),0===$(".background").children("video").length&&$(".background").html(n[d.weather.icon])}var d={location:{city:"",state:"",country:"",locationText:""},weather:{timeStampWeather:0,summary:"",humidity:0,precipProb:0,icon:"",imperial:{temp:0,tempUnits:"&degF",windSpeed:0,windSpeedUnits:"mph"},metric:{temp:0,tempUnits:"&degC",windSpeed:0,windSpeedUnits:"kph"}}},n={"clear-day":'<video poster="./img/clear-day.jpg" preload="auto" autoplay="true" loop="loop" muted="muted"><source id="bgVideo" src="./img/clear-day.mov" type="video/mov"><source id="bgVideo" src="./img/clear-day.mp4" type="video/mp4"></video>',"clear-night":'<video poster="./img/clear-night.jpg" preload="auto" autoplay="true" loop="loop" muted="muted"><source id="bgVideo" src="./img/clear-night.mov" type="video/mov"><source id="bgVideo" src="./img/clear-night.mp4" type="video/mp4"></video>',rain:'<video poster="./img/rain.jpg" preload="auto" autoplay="true" loop="loop" muted="muted"><source id="bgVideo" src="./img/rain.mov" type="video/mov"><source id="bgVideo" src="./img/rain.mp4" type="video/mp4"></video>',snow:'<video poster="./img/snow.jpg" preload="auto" autoplay="true" loop="loop" muted="muted"><source id="bgVideo" src="./img/snow.mov" type="video/mov"><source id="bgVideo" src="./img/snow.mp4" type="video/mp4"></video>',sleet:'<video poster="./img/snow.jpg" preload="auto" autoplay="true" loop="loop" muted="muted"><source id="bgVideo" src="./img/snow.mov" type="video/mov"><source id="bgVideo" src="./img/snow.mp4" type="video/mp4"></video>',wind:'<video poster="./img/wind.jpg" preload="auto" autoplay="true" loop="loop" muted="muted"><source id="bgVideo" src="./img/wind.mov" type="video/mov"><source id="bgVideo" src="./img/wind.mp4" type="video/mp4"></video>',fog:'<video poster="./img/fog.jpg" preload="auto" autoplay="true" loop="loop" muted="muted"><source id="bgVideo" src="./img/fog.mov" type="video/mov"><source id="bgVideo" src="./img/fog.mp4" type="video/mp4"></video>',cloudy:'<video poster="./img/cloudy.jpg" preload="auto" autoplay="true" loop="loop" muted="muted"><source id="bgVideo" src="./img/cloudy.mov" type="video/mov"><source id="bgVideo" src="./img/cloudy.mp4" type="video/mp4"></video>',"partly-cloudy-day":'<video poster="./img/partly-cloudy-day.jpg" preload="auto" autoplay="true" loop="loop" muted="muted"><source id="bgVideo" src="./img/partly-cloudy-day.mov" type="video/mov"><source id="bgVideo" src="./img/partly-cloudy-day.mp4" type="video/mp4"></video>',"partly-cloudy-night":'<video poster="./img/partly-cloudy-night.jpg" preload="auto" autoplay="true" loop="loop" muted="muted"><source id="bgVideo" src="./img/partly-cloudy-night.mov" type="video/mov"><source id="bgVideo" src="./img/partly-cloudy-night.mp4" type="video/mp4"></video>',hail:'<video poster="./img/thunderstorm.jpg" preload="auto" autoplay="true" loop="loop" muted="muted"><source id="bgVideo" src="./img/thunderstorm.mov" type="video/mov"><source id="bgVideo" src="./img/thunderstorm.mp4" type="video/mp4"></video>',thunderstorm:'<video poster="./img/thunderstorm.jpg" preload="auto" autoplay="true" loop="loop" muted="muted"><source id="bgVideo" src="./img/thunderstorm.mov" type="video/mov"><source id="bgVideo" src="./img/thunderstorm.mp4" type="video/mp4"></video>',tornado:'<video poster="./img/thunderstorm.jpg" preload="auto" autoplay="true" loop="loop" muted="muted"><source id="bgVideo" src="./img/thunderstorm.mov" type="video/mov"><source id="bgVideo" src="./img/thunderstorm.mp4" type="video/mp4"></videogit>'},c={"clear-day":"wi-forecast-io-clear-day","clear-night":"wi-forecast-io-clear-night",rain:"wi-forecast-io-rain",snow:"wi-forecast-io-snow",sleet:"wi-forecast-io-sleet",wind:"wi-forecast-io-wind",fog:"wi-forecast-io-fog",cloudy:"wi-forecast-io-cloudy","partly-cloudy-day":"wi-forecast-io-partly-cloudy-day","partly-cloudy-night":"wi-forecast-io-partly-cloudy-night",hail:"wi-forecast-io-hail",thunderstorm:"wi-forecast-io-thunderstorm",tornado:"wi-forecast-io-tornado"};t().then(i).then(r).then(function(){a("imperial")}).catch(function(e){$("#error").fadeIn(1e3),$("#error").html(e.message)}),$("#degF").click(function(){$("#degC").hasClass("selected")&&($("#degC").removeClass(),$("#degF").removeClass().addClass("selected"),a("imperial"))}),$("#degC").click(function(){$("#degF").hasClass("selected")&&($("#degF").removeClass(),$("#degC").removeClass().addClass("selected"),a("metric"))}),$(document).ajaxStart(function(){$("#loading-img").show()}),$(document).ajaxStop(function(){$("#loading-img").hide()})}]);